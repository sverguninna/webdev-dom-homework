<!DOCTYPE html>
<html>
  <head>
    <title>Проект "Комменты"</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="styles.css" />
  </head>
   <style>
    .color{
      background-color: red;
    }
    .color-comment{
      background-color: brown;
    }
    .color-bog{
      background-image: url(./free-icon-heart-2589175.png) ;
      
    }
   </style>
  <body>
    <div class="container">
      <ul id="sheet" class="comments">
      
      </ul>
      <div class="add-form">
        <input id="input"
          type="text"
          class="add-form-name"
          placeholder="Введите ваше имя"
        />
        <textarea id="comment"
          type="textarea"
          class="add-form-text"
          placeholder="Введите ваш коментарий"
          rows="4"
        ></textarea>
        <div class="add-form-row">
          <button id="button" class="add-form-button">Написать</button>
        </div>
      </div>
    </div>
  </body>

  <script src="js-1.js"></script>
  <script>
      const sheet = document.getElementById('sheet')
      const button = document.getElementById('button')
      const input = document.getElementById('input')
       const comment = document.getElementById('comment')
      const likesCounter =document.querySelectorAll('.likes-counter')
      const likesButtonElements  = document.querySelectorAll('.like-button')
      
      const comments=[
        {
          name: 'Глеб Фокин',
          data: '12.02.22 12:18',
          comment: ' Это будет первый комментарий на этой странице',
          like :3,
          isLiked: false
        },
        {
          name: 'Варвара Н.',
          data: '13.02.22 19:22',
          comment: ' Мне нравится как оформлена эта страница! ❤',
          like :75, 
          isLiked: false
        }
      ]

     const  renderCommentsList = ()=> {
     const commentHTML =  comments.map((comment, index)=>{
       return ` <li  class="comment">
          <div class="comment-header">
            <div>${comment.name} </div>
            <div>${comment.data} </div>
          </div>
          <div class="comment-body">
            <div class="comment-text">
              ${comment.comment}
            </div>
          </div>
          <div class="comment-footer">
            <div class="likes">
              <span class="likes-counter" >${comment.like} </span>
              <button class="like-button " ${comment.isLiked? '-active-like  ' : '' } data-index = ${index} ></button>
            </div>
          </div>
        </li>`

      }).join(' ')
     sheet.innerHTML = commentHTML
     }
    renderCommentsList()

    const addLikesButtonElements = ( ) => {
      const likesButtonElements  = document.querySelectorAll('.like-button')
        for (const likeButtonElement of likesButtonElements) {
          likeButtonElement.addEventListener('click', () => {
            const comment = comments[index]; 
            console.log(likeButtonElement.dataset.index);
            if (comment.isLiked === false && likeButtonElement.dataset.index ) {
              comment.isLiked=true
              comment.like +=1
            } else {
              
            }
            
          })
        }
       }  
         

      const innerEverListeners = () =>{
         const comments=  document.querySelectorAll('.comment')
         for (const comment  of comments) {
            
          
         }
       }


      button.addEventListener('click', ()=>{
        input.classList.remove('color')
        if (input.value === '') {
          input.classList.add('color')
          return
        }

        comment.classList.remove('color-comment')
        if (comment.value === '') {
          comment.classList.add('color-comment')
          return
        }
       const oldListHtml  = sheet.innerHTML

       comments.push({
         name: input.value,
         data: todayDate(NowDate ),
         comment: comment.value,
         like: 0
       })
         innerEverListeners()
         renderCommentsList()
          addLikesButtonElements ()
       
      })

    
  </script>
</html>
